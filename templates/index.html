{% extends 'layout.html' %}

{% set content %}
<div class="d-flex justify-content-between align-items-center mb-4">
  <h3 class="fw-bold text-primary mb-0">
    <i class="bi bi-file-bar-graph-fill"></i> Dashboards
  </h3>
  <div class="text-muted small">
    Usuário logado: <strong>{{ session['usuario'] }}</strong>
  </div>
</div>
<div class="row text-white mb-4">
  <div class="col-md-3">
    <div class="card bg-primary shadow-sm">
      <div class="card-body">
        <h6 class="card-title">Total de Variáveis</h6>
        <h3 class="card-text">{{ com_formula + sem_formula }}</h3>
      </div>
    </div>
  </div>
  <div class="col-md-3">
    <div class="card bg-success shadow-sm">
      <div class="card-body">
        <h6 class="card-title">Com Fórmula</h6>
        <h3 class="card-text">{{ com_formula }}</h3>
      </div>
    </div>
  </div>
  <div class="col-md-3">
    <div class="card bg-warning shadow-sm">
      <div class="card-body">
        <h6 class="card-title">Com Normalidade</h6>
        <h3 class="card-text">{{ com_normalidade }}</h3>
      </div>
    </div>
  </div>
  <div class="col-md-3">
    <div class="card bg-secondary shadow-sm">
      <div class="card-body">
        <h6 class="card-title">Sem Fórmula</h6>
        <h3 class="card-text">{{ sem_formula }}</h3>
      </div>
    </div>
  </div>
</div>

<div class="row g-4">
  <div class="col-xl-6 col-lg-12">
    <div class="card p-3 h-100">
      <h6>Variáveis por Unidade</h6>
      <canvas id="grafico1" style="max-height: 300px;"></canvas>
    </div>
  </div>

  <div class="col-xl-6 col-lg-12">
    <div class="card p-3 h-100">
      <h6>Variáveis com Fórmula</h6>
      <canvas id="grafico2" style="max-height: 300px;"></canvas>
    </div>
  </div>

  <div class="col-xl-6 col-lg-12">
    <div class="card p-3 h-100">
      <h6>Casas Decimais</h6>
      <canvas id="grafico3" style="max-height: 300px;"></canvas>
    </div>
  </div>

  <div class="col-xl-6 col-lg-12">
    <div class="card p-3 h-100">
      <h6>Normalidade</h6>
      <canvas id="grafico4" style="max-height: 300px;"></canvas>
    </div>
  </div>
</div>

<script>
  initDashboards({
    labels1: {{ labels1 | tojson | safe }},
    dados1: {{ dados1 | tojson | safe }},
    labels2: {{ labels2 | tojson | safe }},
    dados2: {{ dados2 | tojson | safe }},
    com_formula: {{ com_formula }},
    sem_formula: {{ sem_formula }},
    com_normalidade: {{ com_normalidade }},
    sem_normalidade: {{ sem_normalidade }}
  });
</script>
{% endset %}
